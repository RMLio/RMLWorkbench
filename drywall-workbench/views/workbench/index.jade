extends ../../layouts/default

block head
  title Workbench
  script(type='text/javascript' src='/vendor/jquery/jquery.js' )
  script(type='text/javascript' src='/vendor/jquery.cookie/jquery.cookie.js')
  script(type='text/javascript' src='/js/jquery.form.js')
  script(type='text/javascript' src='/js/file_uploads.js')
  script(type='text/javascript' src='/vendor/underscore/underscore.js')
  script(type='text/javascript' src='/vendor/backbone/backbone.js')

block neck
  link(rel='stylesheet', href='/views/workbench/index.min.css?#{cacheBreaker}')

block body
  div.page-header
    h1 Workbench
  div.row
    div.col-md-4
      div(class='panel panel-primary')
        div.panel-heading
          h3.panel-title Step 1: Input
        div.panel-body.text-center
          div.btn-group-vertical(role='group')
            button(type='button' class='btn btn-primary btn-lg' data-toggle='modal' data-target='#upload-input').
              Upload Input            
            button(type='button' class='btn btn-primary btn-lg' data-toggle='modal' data-target='#api-input').
              Web API            
   
    div.col-md-4
      div(class='panel panel-primary')
        div.panel-heading
          h3.panel-title Step 2: Mapping
        div.panel-body.text-center(id='mapping-rules')
          textarea.hidden(id='mapping-rules-text' rows='20' cols='80')
          div.btn-group-vertical(role='group')
            form(id='mapping-upload-form' enctype='multipart/form-data' action='/workbench/fetch/mapping'  method='post')
              input(type='hidden', name='_csrf', value=_csrf)
              label(class='btn btn-primary btn-lg' for='mapping-upload-input')
                 | Upload Mapping Triples
                 input(type='file' id='mapping-upload-input' name='mappingUpload' style='display:none;' data-allowed-file-extensions="['rml.ttl', 'rml', 'ttl']")
             
            a.button(type='button' href='/log/content' class='btn btn-primary btn-lg' method='get').
              Edit Mappings            
            a.button(type='button' class='btn btn-primary btn-lg' href='/execute').
              Execute Mappings

    div.col-md-4
      div(class='panel panel-primary')
        div.panel-heading
          h3.panel-title Step 3: Publish
        div.panel-body.text-center
          div.btn-group-vertical(role='group')
            a.btn.btn-primary.btn-lg(data-toggle='modal' data-target='#publish')
              | Upload RDF Triples 
            a.btn.btn-primary.btn-lg(data-toggle='modal' data-target='#publish')
              | Publish Triples 
                   
            
              
              
              
  div(id='upload-input' class='modal fade' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' style='display: none;')
    div.modal-dialog(role='document')
      div.modal-content
        div.modal-header
          button.close(type='button' data-dismiss='modal' aria-label='Close')
            span(aria-hidden='true') ×
          h4.modal-title Upload an input file
        div.modal-body
          h4 Format
          p Currently only XML, CSV and JSON are supported.
          label(class='btn btn-primary' for='my-file-selector')
            input(id='my-file-selector' type='file' style='display:none;' data-allowed-file-extensions="['csv', 'xml', 'txt', 'json']")
            | Choose a file

  div(id='upload-mapping' class='modal fade' tabindex='-1' role='dialog' aria-labelledby='AreTheseUsed' style='display: none;')
    div.modal-dialog(role='document')
      div.modal-content
        div.modal-header
          button.close(action='/workbench/fetch/mapping' type='button' data-dismiss='modal' aria-label='Close')
            span(aria-hidden='true') ×
          h4.modal-title Upload an RML file
        div.modal-body
          h4 File format
          p Currently only XML, CSV and JSON are supported. We will attempt to 
          form(action="...", method="post" class='btn btn-primary' for='mapping-selector')
            input(id='mapping-selector' type='file' style='display:none;' data-allowed-file-extensions="['rml.ttl', 'rml', 'ttl']")
            |  Choose a mapping file

   div(id='publish' class='modal fade' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' style='display: none;')
    div.modal-dialog(role='document')
      div.modal-content
        div.modal-header
          button.close(type='button' data-dismiss='modal' aria-label='Close')
            span(aria-hidden='true') ×
          h4.modal-title Publish To LDF Server
        div.modal-body
          form(role="form")
            div(class="form-group")
              label(for="title")
                | Title
              input(class="form-control" id="publish_title" placeholder="Enter title")
            div(class="form-group")
              label(for="type")
                | Type
              select(name="type" id='publish_type' form="typeform" class="form-control")
                option(value="HdtDataSource") 
                    | HDT file
                option(value="TurtleDatasource")
                    | N-Triples document
                option(value="TurtleDatasource")
                    | Turtle document
                option(value="SparqlDatasource") 
                    | SPARQL endpoint
                option(value='JsonLdDatasource')
                    | JSON-LD document
            div(class="form-group")
              label(for="description")
                | Description
              input(class="form-control" id="publish_description" placeholder="Enter description")       
            div(id='publish_fileSelector' class='form-group')
              label(for="setting")
                | File
                                                
            
            button(type="submit" id='publish_submit' class="btn btn-default")
                | Publish
                
  script(type='text/javascript' src='/js/backbone/publish/publish.js') 
  script(type='text/javascript' src='/js/backbone/publish/file.js') 
    
             
